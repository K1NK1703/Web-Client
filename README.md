# Задание для ТР по дисциплине «Базы данных»

Компания по нефтедобыче/нефтепереработке нуждается в базе данных для логирования событий с датчиков и проведения аналитики. Компания предоставляет операторам завода ценные данные для принятия правильных решений. Различные типы датчиков используются для мониторинга различных параметров в производственных установках и трубопроводах, что позволяет повысить эффективность и безопасность процессов на предприятии. Датчики температуры и давления следят за параметрами внутри оборудования, обеспечивая регулировку процессов перегонки сырья. Датчики уровня и датчики присутствия помогают отслеживать заполнение резервуаров и перемещение материалов по магистралям. Датчики газовых выбросов и качества воздуха контролируют экологические показатели, обеспечивая соблюдение стандартов и нормативов.
Аналитики пишут аналитические запросы к БД, которыми пользуются операторы заводов, моя цель формировать clickhouse::Block (кликхаус блоки) и записывать полную информацию, полученную с датчика – id датчика, его тип, температура, давление и т.д.
Данные, поступающие с датчиков, должны анализироваться в режиме реального времени и использоваться для оптимизации процессов на заводах.
Компания имеет несколько десятков заводов, с заводов ежедневно приходят миллионы событий с датчиков.

# Запуск проекта

При запуске проекта Spring автоматически запустит Docker-контейнер по написанному подключению в Docker-compose.yml. Требуется, чтобы приложение Docker было запущено в фоновом режиме.
Подключение к БД происходит на основе конфигурационного файлла application.yml, в котором написано, какой профиль активный в данный момент. Если вы собираетесь работать с приложением только локально, то файл application-dev.yml вам не понадобится, а содержимое application-local.yml можно переместить в application.yml без указания профиля.

Также при запуске приложения Spring на основе класса DatabaseInitializer.java выполнит SQL-скрипты по созданию таблиц в БД (schema.sql) и заполнит таблицы данными (schema-data.sql).
### Создание представлений (View) не получится через SQL-скрипт schema.sql. Но можно попытать удачу!
Можно усовершенствовать данную систему с помощью системы миграций - Liquibase.
Аналогично, если требуется очистка БД от таблиц, процедур, функций, представлений и триггеров, то требуется раскомментировать класс DataSourceCleanup.java, который будет выполняться по завершению работы приложения. Данный класс будет использовать SQL-скрипт - schema-drop.sql.

Файл schema-func.sql не является исполняемым и служит для хранения SQL кода, который вам требуется использовать при выполнении ТР.

# API

В остальном коде описан обычный API. Его потребуется изменить под вашу структуру БД и под ваше ТЗ.
Стоит упомянуть, что класс MvcConfig.java заменяет 1 (или 2) лишний(-их) контроллер(-а). Достаточно прописать маппинг и название представления, которое будет открываться по указанному вами адресу.
Другие конфигурационные файлы останутся неизменными.

# JS и Html

Тут выбор остаётся за вами, полное творчество.
В моём случае страницы не будут обновляться при изменении запроса. А также для создания новых сущностей и их изменения реализованы модальные окна.

# Важный момент

В данном проекте отсутствуют каскадные операции между сущносями Hibernate, кроме сущностйей User и Role. Вам потребуется дописать конкретные поля у остальных сущностей, чтобы между ними была связь и выполнялись каскадные операции. Можно ориентироваться на классы User.java, Role.java. Между ними связь Many-To-Many, которая описывается аннотациями Hibernate.
